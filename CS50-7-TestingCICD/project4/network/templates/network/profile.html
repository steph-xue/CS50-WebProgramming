{% extends "network/layout.html" %}

{% block body %}

    <h2 class="px-5 pt-4 pb-3 mt-3 text-center">{{ profile_user.username | capfirst }}</h2>

    <ul class="row d-flex justify-content-center">
        <li class="col-2 follow-border">
            Followers: {{ followers.count }}
        </li>
        <li class="col-2 follow-border">
            Following: {{ following.count }}
        </li>
    </ul>

    {% if user.is_authenticated %}
        {% if user is not profile_user %}
            {% if is_following %}
                <form action="{% url 'unfollow' user_id=profile_user.id %}" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <input class="form-control" type="hidden" name="unfollow" value="profile_user.id">
                    </div>
                    <div class="text-center adjust">
                        <input class="btn btn-brown justify-content-center" type="submit" value="Unfollow">
                    </div>
                </form>
            {% else %}
                <form action="{% url 'follow' user_id=profile_user.id %}" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <input class="form-control" type="hidden" name="follow" value="profile_user.id">
                    </div>
                    <div class="text-center adjust">
                        <input class="btn btn-brown justify-content-center" type="submit" value="Follow">
                    </div>
                </form>
            {% endif %}
        {% endif %}
    {% endif %}

    {% for post in page_posts %}
        <div class="px-4 py-3">
            <div class="card">
                <h5 class="card-header bg-brown"><a class="blacklink" href="{% url 'profile' user_id=post.user.id %}">{{ post.user.username | capfirst }}</a></h5>
                <div class="card-body">
                <p class="card-text">{{ post.content }}</p>
                <p class="card-text"><i>{{ post.date_time }}</i></p>
                </div>
            </div>
        </div>
    {% endfor %}

    <br>

    <nav aria-label="Page navigation">
        <ul class="pagination d-flex justify-content-center">
            {% if page_posts.has_previous %}
                <li class="page-item"><a class="page-link brown-text" href="?page={{ page_posts.previous_page_number }}">Previous</a></li>
            {% endif %}
            {% for i in page_posts.paginator.page_range %}
                <li class="page-item"><a class="page-link brown-text" href="?page={{ i }}">{{ i }}</a></li>
            {% endfor %}
            {% if page_posts.has_next %}
                <li class="page-item"><a class="page-link brown-text" href="?page={{ page_posts.next_page_number }}">Next</a></li>
            {% endif %}
        </ul>
      </nav>



{% endblock %}